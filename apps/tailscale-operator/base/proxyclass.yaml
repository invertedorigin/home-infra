apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: node-1
spec:
  statefulSet:
    pod:
      labels:
        team: eng
        environment: prod
      nodeSelector:
        kubernetes.io/hostname: "node-1"
      tailscaleContainer:
        resources:
          limits:
            squat.ai/tun: "1"
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: node-2
spec:
  statefulSet:
    pod:
      labels:
        team: eng
        environment: prod
      nodeSelector:
        kubernetes.io/hostname: "node-2"
      tailscaleContainer:
        resources:
          limits:
            squat.ai/tun: "1"
---
apiVersion: tailscale.com/v1alpha1
kind: ProxyClass
metadata:
  name: node-3
spec:
  statefulSet:
    pod:
      dnsPolicy: None
      labels:
        team: eng
        environment: prod
      annotations:
        k8s.v1.cni.cncf.io/networks: |-
          [
            {
              "name": "macvlan-conf-dhcp",
              "namespace": "kube-system",
              "mac": "5a:d2:3c:48:a2:11",
              "default-route": ["10.0.1.1"]
            }
          ]
      nodeSelector:
        kubernetes.io/hostname: "node-3"
      tailscaleContainer:
        resources:
          limits:
            squat.ai/tun: "1"
