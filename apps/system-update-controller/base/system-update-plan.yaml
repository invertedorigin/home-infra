---
apiVersion: upgrade.cattle.io/v1
kind: Plan
metadata:
  name: edgenode-upgrade
  namespace: system-upgrade
spec:
  concurrency: 1
  # renovate: datasource=github-releases depName=jtcressy-home/edgenode
  version: v0.3.1
  nodeSelector:
    matchExpressions:
    - key: kubernetes.io/hostname
      operator: Exists
  tolerations:
   - {key: cloud, effect: NoSchedule, operator: Equal, value: oracle}
  serviceAccountName: system-upgrade
  # Don't cordon / drain since this is a single node clsuter.
  cordon: false
  upgrade:
    image: ghcr.io/jtcressy-home/edgenode
    command:
    - "/usr/sbin/suc-upgrade"
